function L(){const a=document.querySelector(".loader"),t=document.querySelector(".loader__timer"),e=performance.now();window.addEventListener("load",()=>{const s=performance.now()-e;let n=0;const d=16,p=setInterval(()=>{n+=d,n>s&&(n=s);const m=Math.floor(n/1e3),c=Math.floor(n%1e3);t.textContent=`${m}.${c.toString().padStart(3,"0")}`,n>=s&&(clearInterval(p),setTimeout(()=>{t.style.transform="scale(2)",setTimeout(()=>{t.style.transform="scale(1)",setTimeout(()=>{a.remove()},500)},300)},100))},d)})}function _(a,t,e,o,s){const n=document.querySelector(a),d=document.querySelector(`${a} span`),p=500,m=document.querySelector(o);document.addEventListener("click",function(c){const l=c.target;if(l.closest(t)&&l.closest(t).classList.contains(s)){const r=l.closest(t).querySelector(e),u=r.cloneNode(!0),f={left:n.getBoundingClientRect().right,top:n.getBoundingClientRect().top};u.style.cssText=`
        position:fixed;
        left:${r.getBoundingClientRect().left}px;
        top:${r.getBoundingClientRect().bottom}px;
        width:${r.offsetWidth}px;
        height:${r.offsetHeight}px;
        transition: all ${p}ms ease;
        z-index: 1000;
      `,document.body.append(u),setTimeout(()=>{u.style.left=`${f.left}px`,u.style.top=`${f.top}px`,u.style.width="0px",u.style.height="0px",u.style.opacity="0.5"},0),setTimeout(()=>{d.textContent=parseInt(d.textContent,10)+1,u.remove(),parseInt(d.textContent,10)>0&&(m.style.transform="scale(1)")},p)}l.closest(t)&&!l.closest(t).classList.contains(s)&&setTimeout(()=>{d.textContent=parseInt(d.textContent,10)-1}),setTimeout(()=>{parseInt(d.textContent,10)<=0&&(m.style.transform="scale(0)")})})}function x(){const a=document.querySelectorAll("[data-quantity-container]");if(!a.length)return;a.forEach(e=>{e.querySelectorAll(".quantity").forEach(o=>{const s=o.querySelector("input"),n=o.querySelector(".quantity-remove");Number(s.value)<=0?n.classList.add("_disabled"):n.classList.remove("_disabled")}),t(e),e.addEventListener("click",o=>{const s=o.target.closest(".quantity__button");if(!s)return;const n=s.closest(".quantity"),d=n.querySelector("input"),p=n.querySelector(".quantity-remove");let m=Number(d.value)||0;s.classList.contains("quantity-add")?m++:m--,m<=0?(m=0,p.classList.add("_disabled")):p.classList.remove("_disabled"),d.value=m,t(e)}),e.addEventListener("input",o=>{const s=o.target.closest(".quantity input");if(!s)return;s.value=s.value.replace(/\D/g,"");const n=s.closest(".quantity").querySelector(".quantity-remove");Number(s.value)<=0?n.classList.add("_disabled"):n.classList.remove("_disabled"),t(e)})});function t(e){const o=e.querySelectorAll(".product-card__price span");let s=0;o.forEach(d=>{const p=parseFloat(d.textContent.replace(/ /g,"").replace(",","."))||0,m=d.closest(".product-card"),c=Number(m.querySelector("input").value)||0,l=m.querySelector(".product-card__sum span");if(!l)return;const i=p*c;l.innerHTML=`${i.toLocaleString()} <i class="icon-rub"></i>`,s+=i});const n=e.querySelector(".input-total");n&&(n.innerHTML=`Итого: ${s.toLocaleString()} <i class="icon-rub"></i>`)}}function b(){let a=[],t=document.querySelectorAll("[data-da]"),e=[],o=[];if(t.length>0){let c=0;for(let l=0;l<t.length;l++){const i=t[l],r=i.getAttribute("data-da"),u=i.hasAttribute("data-da-position")?i.getAttribute("data-da-position"):"last",f=i.hasAttribute("data-da-resolution")?i.getAttribute("data-da-resolution"):768;i.setAttribute("data-da-index",c),a[c]={parent:i.parentNode,index:d(i)},e[c]={element:i,destination:document.querySelector("."+r),place:u,breakpoint:f},c++}m(e);for(let l=0;l<e.length;l++){const r=e[l].breakpoint,f=window.matchMedia(`(max-width: ${r}px)`);o.push(f),f.addEventListener("change",s)}}function s(){for(let c=0;c<e.length;c++){const l=e[c],i=l.element,r=l.destination,u=l.place,h="_dynamic_adapt_"+l.breakpoint;if(o[c].matches){if(!i.classList.contains(h)){let y=p(r)[u];u==="first"?y=p(r)[0]:u==="last"&&(y=p(r)[p(r).length]),r.insertBefore(i,r.children[y]),i.classList.add(h)}}else i.classList.contains(h)&&(n(i),i.classList.remove(h))}}s();function n(c){const l=c.getAttribute("data-da-index"),i=a[l],r=i.parent,u=i.index,f=p(r,!0)[u];r.insertBefore(c,r.children[f])}function d(c){return Array.prototype.slice.call(c.parentNode.children).indexOf(c)}function p(c,l){const i=c.children,r=[];for(let u=0;u<i.length;u++){const f=i[u];(l||f.getAttribute("data-da")==null)&&r.push(u)}return r}function m(c){c.sort(function(l,i){return l.breakpoint>i.breakpoint?-1:1}),c.sort(function(l,i){return l.place>i.place?1:-1})}}class g{constructor(t,e=350){if(!t)throw new Error("ItcCollapse: target element is required");this._target=t,this._duration=e}show(){const t=this._target;if(t.classList.contains("collapsing")||t.classList.contains("_show"))return;t.classList.remove("_collapse");const e=t.scrollHeight;t.style.height="0px",t.style.overflow="hidden",t.style.transition=`height ${this._duration}ms ease`,t.classList.add("collapsing"),requestAnimationFrame(()=>{t.style.height=`${e}px`}),setTimeout(()=>{t.classList.remove("collapsing"),t.classList.add("_collapse","_show"),t.style.height="",t.style.transition="",t.style.overflow=""},this._duration)}hide(){const t=this._target;if(t.classList.contains("collapsing")||!t.classList.contains("_show"))return;const e=t.scrollHeight;t.style.height=`${e}px`,t.offsetHeight,t.style.overflow="hidden",t.style.transition=`height ${this._duration}ms ease`,t.classList.remove("_collapse","_show"),t.classList.add("collapsing"),requestAnimationFrame(()=>{t.style.height="0px"}),setTimeout(()=>{t.classList.remove("collapsing"),t.classList.add("_collapse"),t.style.height="",t.style.transition="",t.style.overflow=""},this._duration)}toggle(){this._target.classList.contains("_show")?this.hide():this.show()}static initAll(t="._collapse",e=350){const o=document.querySelectorAll(t);return Array.from(o).map(s=>new g(s,e))}}function w(){let a=0;const t=document.querySelector(".page__header");window.addEventListener("scroll",()=>{const e=window.innerWidth,o=window.pageYOffset||document.documentElement.scrollTop;let s=32;e<=690&&(s=39),e<=490&&(s=36),o>a?(t.style.top=`-${s}px`,t.classList.add("with-border")):(t.style.top="0",t.classList.remove("with-border")),a=o<=0?0:o},{passive:!0})}function q(a){document.querySelectorAll(a).forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("like")})})}function S(){const a=document.querySelectorAll(".burger-button"),t=document.querySelector(".header"),e=document.querySelector(".sidebar-menu");a.forEach(o=>{o.addEventListener("click",()=>{o.classList.toggle("is-active"),o.classList.contains("is-active")?(v(e),t.classList.add("with-shadow")):o.classList.contains("is-active")||(v(e),t.classList.remove("with-shadow"))})}),window.addEventListener("resize",()=>{a.forEach(o=>{o.classList.contains("is-active")&&(document.body.classList.remove("no-scroll"),e.classList.remove("_open-menu"),o.classList.remove("is-active"))})})}function v(a){const t=document.querySelector(".page__aside-button");a.classList.contains("_open-menu")?(a.style.transition="transform 0.3s ease",a.classList.remove("_open-menu"),E(),document.body.classList.remove("no-scroll"),e(a),t&&setTimeout(()=>{t.style.opacity="1",t.style.transition="opacity 0.3s ease",t.style.pointerEvents="all"},300)):(t&&(t.style.opacity="0",t.style.transition="opacity 0.3s ease",t.style.pointerEvents="none"),a.style.transition="transform 0.3s ease",a.classList.add("_open-menu"),s(a),document.body.classList.add("no-scroll"),e(a));function e(n){function d(){n.style.transition="",n.removeEventListener("transitionend",d)}n.addEventListener("transitionend",d)}const o=document.querySelector(".page__header");function s(n){let d=0;d=window.scrollY||document.documentElement.scrollTop,document.documentElement.style.setProperty("--scroll-position",`${d}px`);const p=window.innerWidth-document.documentElement.clientWidth;p>0&&(document.body.style.paddingRight=`${p}px`,n&&(n.style.paddingRight=`${p}px`,o.style.paddingRight=`${p}px`))}}function E(a){document.documentElement.style.removeProperty("--scroll-position"),document.body.style.paddingRight="",window.scrollTo(0,scrollY)}function T(){document.querySelectorAll("._slideToggle").forEach(t=>{const e=t.querySelector("._trigger");if(!e)return;const o=t.querySelector("._collapse");o&&(t._collapseInstance=new g(o),e.addEventListener("click",()=>{const s=t.closest(".parent");if(s){const n=s.querySelector("._open");n&&n!==t&&(n.classList.remove("_open"),n._collapseInstance.toggle())}t.classList.toggle("_open"),t._collapseInstance.toggle()}))})}L();_(".favourites",".product-card__favourites",".icon-heart-like",".icon-heart-like","like");document.addEventListener("DOMContentLoaded",()=>{x(),w(),T(),q(".product-card__favourites"),S(),b()});console.log("%c РОССИЯ ","background: blue; color: yellow; font-size: x-large; border-left: 5px solid black; border-top: 30px solid white; border-right: 2px solid black; border-bottom: 30px solid red;");
