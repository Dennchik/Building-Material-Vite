import{b as w}from"./vendors/build-swiper-Bbce2EWT.js";import{s as A,a as T}from"./vendors/slide-DsUrhm2T.js";import{I as C}from"./vendors/vendor-BrPt5w0u.js";import{I as M,a as P,c as I,d as B}from"./vendors/drop-menu-DQMOothh.js";function $(s){const t=document.querySelectorAll(s);t.length&&t.forEach(e=>{let n=null;function c(){n=C(e,{mask:"+7 (000) 000-00-00",lazy:!0}),n.updateValue()}e.addEventListener("focus",function(){n||c(),e.value===""&&(e.value="+7 "),n.updateValue()}),e.addEventListener("blur",function(){e.value.trim()==="+7"&&(e.value="",n&&n.updateValue(""))})})}function V(){const s=document.querySelector(".loader"),t=document.querySelector(".loader__timer"),e=performance.now();s&&window.addEventListener("load",()=>{const c=performance.now()-e;let o=0;const a=16,u=setInterval(()=>{o+=a,o>c&&(o=c);const m=Math.floor(o/1e3),l=Math.floor(o%1e3);t.textContent=`${m}.${l.toString().padStart(3,"0")}`,o>=c&&(clearInterval(u),setTimeout(()=>{t.style.transform="scale(2)",setTimeout(()=>{t.style.transform="scale(1)",setTimeout(()=>{s.remove()},500)},300)},100))},a)})}function O(s,t,e,n,c){const o=document.querySelector(s),a=document.querySelector(`${s} span`),u=500,m=document.querySelector(n);o&&document.addEventListener("click",function(l){const i=l.target;if(i.closest(t)&&i.closest(t).classList.contains(c)){const r=i.closest(t).querySelector(e),f=r.cloneNode(!0),p={left:o.getBoundingClientRect().right,top:o.getBoundingClientRect().top};f.style.cssText=`
        position:fixed;
        left:${r.getBoundingClientRect().left}px;
        top:${r.getBoundingClientRect().bottom}px;
        width:${r.offsetWidth}px;
        height:${r.offsetHeight}px;
        transition: all ${u}ms ease;
        z-index: 1000;
      `,document.body.append(f),setTimeout(()=>{f.style.left=`${p.left}px`,f.style.top=`${p.top}px`,f.style.width="0px",f.style.height="0px",f.style.opacity="0.5"},0),setTimeout(()=>{a.textContent=parseInt(a.textContent,10)+1,f.remove(),parseInt(a.textContent,10)>0&&(m.style.transform="scale(1)")},u)}i.closest(t)&&!i.closest(t).classList.contains(c)&&setTimeout(()=>{a.textContent=parseInt(a.textContent,10)-1}),setTimeout(()=>{parseInt(a.textContent,10)<=0&&(m.style.transform="scale(0)")})})}function D(){const s=document.querySelectorAll("[data-quantity-container]"),t=document.querySelectorAll(".product-price");console.log(s),s&&s.forEach(o=>{let a=o.querySelector("input"),u=o.querySelector(".quantity-remove");a.value==="0"&&u.classList.add("_disabled"),o.addEventListener("click",m=>{let l=m.target;if(l.closest(".quantity__button")){let i=l.closest(".quantity").querySelector("input"),d=parseInt(i.value)||0;l.classList.contains("quantity-add")?d++:d--,d<=0?(d=0,e(i)):n(i),i.value=d,c()}}),a.addEventListener("input",function(m){this.value=this.value.replace(/[^0-9.]/g,"")})});function e(o){o.closest(".quantity").querySelector(".quantity-remove").classList.add("_disabled")}function n(o){o.closest(".quantity").querySelector(".quantity-remove").classList.remove("_disabled")}function c(){let o=0;t.forEach(a=>{const u=document.querySelector(".input-total");let m=parseFloat(a.textContent.replace(/ /g,"").replace(",","."))||0,l=parseFloat(a.closest(".product-cart").querySelector("input").value)||0,i=m*l;o+=i,a.closest(".product-cart").querySelector(".product-cart__quantity-price").textContent=i.toLocaleString("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}),u.innerHTML="Итого: "+o.toLocaleString()+'<i class="icon-rub"></i>'})}c()}function F(){let s=[],t=document.querySelectorAll("[data-da]"),e=[],n=[];if(t.length>0){let l=0;for(let i=0;i<t.length;i++){const d=t[i],r=d.getAttribute("data-da"),f=d.hasAttribute("data-da-position")?d.getAttribute("data-da-position"):"last",p=d.hasAttribute("data-da-resolution")?d.getAttribute("data-da-resolution"):768;d.setAttribute("data-da-index",l),s[l]={parent:d.parentNode,index:a(d)},e[l]={element:d,destination:document.querySelector("."+r),place:f,breakpoint:p},l++}m(e);for(let i=0;i<e.length;i++){const r=e[i].breakpoint,p=window.matchMedia(`(max-width: ${r}px)`);n.push(p),p.addEventListener("change",c)}}function c(){for(let l=0;l<e.length;l++){const i=e[l],d=i.element,r=i.destination,f=i.place,h="_dynamic_adapt_"+i.breakpoint;if(n[l].matches){if(!d.classList.contains(h)){let y=u(r)[f];f==="first"?y=u(r)[0]:f==="last"&&(y=u(r)[u(r).length]),r.insertBefore(d,r.children[y]),d.classList.add(h)}}else d.classList.contains(h)&&(o(d),d.classList.remove(h))}}c();function o(l){const i=l.getAttribute("data-da-index"),d=s[i],r=d.parent,f=d.index,p=u(r,!0)[f];r.insertBefore(l,r.children[p])}function a(l){return Array.prototype.slice.call(l.parentNode.children).indexOf(l)}function u(l,i){const d=l.children,r=[];for(let f=0;f<d.length;f++){const p=d[f];(i||p.getAttribute("data-da")==null)&&r.push(f)}return r}function m(l){l.sort(function(i,d){return i.breakpoint>d.breakpoint?-1:1}),l.sort(function(i,d){return i.place>d.place?1:-1})}}function R(){document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("._order-form").forEach((s,t)=>{const e=s.querySelector("input.name"),n=s.querySelector("input.phone"),c=s.querySelector("input.email"),o=s.querySelector("input.password"),a=s.querySelector(".check-box__input"),u=s.querySelector(".send-button"),m=u?u.closest(".button-container"):null;console.log(`Форма ${t+1}:`,{password:o,email:c,name:e,phone:n,checkbox:a,sendButton:u,buttonContainer:m});function l(r,{maxSpread:f=12,duration:p=1e3,pulses:h=3}={}){if(!r)return;const y=r.closest(".button-container")||r.parentElement;if(!y)return;let g=null;const v=p;function b(L){g||(g=L);const S=L-g,E=Math.min(S/v,1),x=Math.abs(Math.sin(E*h*Math.PI)),q=f*x,k=getComputedStyle(document.documentElement).getPropertyValue("--alarm-color").trim();y.style.boxShadow=`0 0 ${q}px ${q/2}px ${k}`,S<v?requestAnimationFrame(b):y.style.boxShadow=""}requestAnimationFrame(b)}function i(){let r=!0;return o&&o.value.trim().length<3&&(r=!1),c&&c.value.trim().length<3&&(r=!1),e&&e.value.trim().length<3&&(r=!1),n&&n.value.trim().length!==18&&(r=!1),a&&(a.checked||(r=!1)),m&&m.classList.toggle("is-disabled",!r),u&&(u.disabled=!r),r}function d(){o&&o.value.trim().length<3&&l(o),c&&c.value.trim().length<3&&l(c),e&&e.value.trim().length<3&&l(e),n&&n.value.trim().length!==18&&l(n),a&&!a.checked&&l(a)}o&&o.addEventListener("input",i),c&&c.addEventListener("input",i),e&&e.addEventListener("input",i),n&&n.addEventListener("input",i),a&&a.addEventListener("change",i),i(),m&&m.addEventListener("click",r=>{m.classList.contains("is-disabled")&&(r.preventDefault(),console.warn(`⚠️ [Форма ${t+1}] Невалидная попытка отправки`),d())}),u&&u.addEventListener("click",()=>{if(!u.disabled&&(!m||!m.classList.contains("is-disabled"))){let r="";u&&(r=u.getAttribute("goal-name")||"");const f=new FormData;f.append("action","send_telegram_message"),n&&n.value&&f.append("phone",n.value.trim()),e&&e.value&&f.append("name",e.value.trim()),f.append("goalName",r),fetch(localizedVars.ajax_url,{method:"POST",headers:{"X-WP-Nonce":localizedVars.ajax_nonce},body:f}).then(p=>p.text()).then(p=>{alert("Ваш запрос отправлен."),console.log("Ответ сервера:",p),c&&(c.value=""),n&&(n.value=""),e&&(e.value=""),a&&(a.checked=!1),i()}).catch(p=>{console.error("Ошибка при отправке:",p),alert("Произошла ошибка при отправке данных.")})}})})})}function H(){function s(t){const e=document.getElementById(t);if(!e)return;const n=window.innerWidth;let c=100;n<=768?c=80:n<=1440&&(c=71);const a=e.getBoundingClientRect().top+window.scrollY-c;window.scrollTo({top:a,behavior:"smooth"})}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".anchor-link").forEach(e=>{e.addEventListener("click",function(n){const c=this.getAttribute("href"),o=new URL(c,window.location.href);if(o.pathname!==window.location.pathname)return;n.preventDefault();const a=o.hash.substring(1),u=n.target.closest(".sidebar-menu");u&&u.classList.contains("_open-menu")&&(document.querySelector(".burger-button")?.classList.remove("is-active"),document.body.classList.remove("no-scroll"),u.classList.remove("_open-menu"),typeof toggleSidebarMenu=="function"&&toggleSidebarMenu(u)),s(a)})})})}function W(s){document.querySelectorAll(s).forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("like")})})}function N(){const s=document.querySelectorAll(".burger-button"),t=document.querySelector(".header"),e=document.querySelector(".sidebar-menu");s.forEach(n=>{n.addEventListener("click",()=>{n.classList.toggle("is-active"),n.classList.contains("is-active")?(_(e),t.classList.add("with-shadow")):n.classList.contains("is-active")||(_(e),t.classList.remove("with-shadow"))})}),window.addEventListener("resize",()=>{s.forEach(n=>{n.classList.contains("is-active")&&(document.body.classList.remove("no-scroll"),e.classList.remove("_open-menu"),n.classList.remove("is-active"))})})}function _(s){const t=document.querySelector(".page__aside-button");s.classList.contains("_open-menu")?(s.classList.remove("_open-menu"),Q(),document.body.classList.remove("no-scroll"),e(s),t&&setTimeout(()=>{t.style.opacity="1",t.style.transition="opacity 0.3s ease",t.style.pointerEvents="all"},300)):(t&&(t.style.opacity="0",t.style.transition="opacity 0.3s ease",t.style.pointerEvents="none"),s.style.transition="transform 0.3s ease",s.classList.add("_open-menu"),document.body.classList.add("no-scroll"),e(s));function e(n){function c(){n.style.transition="",n.removeEventListener("transitionend",c)}n.addEventListener("transitionend",c)}}function z(){let s=0;const t=document.querySelector(".header__top-menu");window.addEventListener("scroll",()=>{const e=window.scrollY||document.documentElement.scrollTop;e<s?t.classList.remove("active"):t.classList.add("active"),s=e<=0?0:e})}function Y(){document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".content").forEach(t=>{const e=t.querySelector(".show-more");if(e){const n=e.querySelector("span"),c=n.textContent;let o=1;const a=1,u=t.querySelectorAll(".section");u.forEach((l,i)=>{i>=o&&l.classList.add("hidden")});const m=()=>{window.innerWidth>=768&&o%2===0?e.classList.add("seo-block__button--even"):e.classList.remove("seo-block__button--even")};m(),e.addEventListener("click",function(){if(o<u.length){for(let l=0;l<a;l++)o<u.length&&(u[o].classList.remove("hidden"),o++);o===u.length&&(n.textContent="Свернуть",e.classList.add("_rotate-button"))}else u.forEach((l,i)=>{i>=1&&l.classList.add("hidden")}),o=1,n.textContent=c,e.classList.remove("_rotate-button");m()})}})})}function U(){[{triggerSelector:".login-button",modalSelector:".page__form-login"},{triggerSelector:".phone-call",modalSelector:".page__order-call"}].forEach(({triggerSelector:t,modalSelector:e})=>{const n=document.querySelector(e),c=document.querySelectorAll(t),o=n.querySelector(".btn-close");c.forEach(a=>{a.addEventListener("click",()=>{if(j(n),document.body.classList.add("no-scroll"),n.classList.add("is-open"),e===".questions-form"){const{showFieldset:u}=G();u(0)}})}),o.addEventListener("click",()=>{if(n.classList.remove("is-open"),document.body.classList.remove("no-scroll"),e===".questions-form"){const a=n.querySelector(".form-question__fieldset-table.active");a?(a.classList.remove("active"),console.log("Класс active удалён")):console.log("Нет активного fieldset")}})})}function j(s){const t=window.innerWidth-document.documentElement.clientWidth;console.log("scrollbarWidth:",t),s&&t>0?document.body.style.paddingRight=`${t}px`:document.body.style.paddingRight="0px"}function Q(s){document.documentElement.style.removeProperty("--scroll-position"),document.body.style.paddingRight="",window.scrollTo(0,scrollY)}function X(s,t){const e=document.querySelector(s),n=document.querySelector(t);e&&(n?(e.style.transform="translateY(110%)",n.addEventListener("click",()=>{e.style.transform="translateY(110%)",e.style.transition="transform 0.5s ease"})):console.log("кнопка не найдена"),setTimeout(()=>{e.style.transform="translateY(0)",e.style.transition="transform 0.5s ease"},3e3))}function G(){const s=document.querySelector(".form-question__content"),t=document.querySelectorAll(".form-question .form-question__fieldset-table");let e=0;const n=()=>{const o=s.querySelector(".form-question__fieldset-table.active");if(o){const a=o.offsetHeight;s.style.height=`${a}px`}},c=o=>{t.forEach(a=>a.classList.remove("active")),t[o].classList.add("active"),n()};return document.querySelectorAll("._btn-next").forEach(o=>{o.addEventListener("click",()=>{e<t.length-1&&(e++,c(e))})}),document.querySelectorAll("._btn-prev").forEach(o=>{o.addEventListener("click",()=>{e>0&&(e--,c(e))})}),{showFieldset:c}}function ne(){let s=document.querySelector(".send-order"),t=s?s.querySelector("._collapse"):null;const e=t?new M(t):null,n=document.querySelector(".order-place__checkbox");document.querySelector(".order-place__form-button").addEventListener("click",function(){let c=document.querySelector(".cart-page__title");c&&(c.innerHTML="оформление заказа"),e&&e.toggle();let o=document.querySelector(".order-place__send-button"),a=document.querySelector(".order-place__form-button");o&&(o.style.display="block"),a&&(a.style.display="none"),n&&(n.style.display="block")})}function J(){document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("data-container"),t=document.getElementById("pagination-container");if(!t||t.dataset.paginationInit==="1")return;t.dataset.paginationInit="1";const e=8;let n=1;const o=(s?Array.from(s.querySelectorAll(".product-slide__slide")):Array.from(document.querySelectorAll(".product-slide__slide"))).filter(m=>!(!m||m.classList.contains("swiper-slide-duplicate")||m.classList.contains("slick-cloned")||m.classList.contains("clone")||m.textContent.trim().length===0&&m.querySelector("img")===null&&m.children.length===0));function a(m){const l=Math.max(1,Math.ceil(o.length/e));if(l<=1){o.forEach(r=>r.style.display=""),t.innerHTML="",t.style.display="none";return}else t.style.display="";n=Math.min(Math.max(1,m),l);const i=(n-1)*e,d=i+e;o.forEach((r,f)=>{r.style.display=f>=i&&f<d?"":"none"}),u(n)}function u(m){const l=Math.ceil(o.length/e);if(l<=1){t.innerHTML="",t.style.display="none";return}t.innerHTML="";for(let i=1;i<=l;i++){const d=document.createElement("button");d.type="button",d.textContent=i,d.className=i===m?"active":"",d.addEventListener("click",()=>{n=i,a(n)}),t.appendChild(d)}}a(n)})}document.addEventListener("DOMContentLoaded",()=>{A(".product-slide"),T(".slide-news"),$(".phone"),U(),D(),z(),P(),I(),W(".product-card__favourites"),N(),F()});H();V();O(".favourites",".product-card__favourites",".icon-heart-like",".icon-heart-like","like");w();R();Y();X(".cookies-accept",".cookies-accept__button");B(".main-menu__link");document.querySelectorAll(".product-card__label").forEach(s=>{const t=s.querySelector("span");(!t||!t.textContent.trim())&&(s.style.display="none")});console.log("%c РОССИЯ ","background: blue; color: yellow; font-size: x-large; border-left: 5px solid black; border-top: 30px solid white; border-right: 2px solid black; border-bottom: 30px solid red;");J();export{ne as p};
