function L(){const l=document.querySelector(".loader"),t=document.querySelector(".loader__timer"),e=performance.now();window.addEventListener("load",()=>{const s=performance.now()-e;let a=0;const u=16,p=setInterval(()=>{a+=u,a>s&&(a=s);const m=Math.floor(a/1e3),c=Math.floor(a%1e3);t.textContent=`${m}.${c.toString().padStart(3,"0")}`,a>=s&&(clearInterval(p),setTimeout(()=>{t.style.transform="scale(2)",setTimeout(()=>{t.style.transform="scale(1)",setTimeout(()=>{l.remove()},500)},300)},100))},u)})}function _(l,t,e,n,s){const a=document.querySelector(l),u=document.querySelector(`${l} span`),p=500,m=document.querySelector(n);document.addEventListener("click",function(c){const i=c.target;if(i.closest(t)&&i.closest(t).classList.contains(s)){const r=i.closest(t).querySelector(e),d=r.cloneNode(!0),f={left:a.getBoundingClientRect().right,top:a.getBoundingClientRect().top};d.style.cssText=`
        position:fixed;
        left:${r.getBoundingClientRect().left}px;
        top:${r.getBoundingClientRect().bottom}px;
        width:${r.offsetWidth}px;
        height:${r.offsetHeight}px;
        transition: all ${p}ms ease;
        z-index: 1000;
      `,document.body.append(d),setTimeout(()=>{d.style.left=`${f.left}px`,d.style.top=`${f.top}px`,d.style.width="0px",d.style.height="0px",d.style.opacity="0.5"},0),setTimeout(()=>{u.textContent=parseInt(u.textContent,10)+1,d.remove(),parseInt(u.textContent,10)>0&&(m.style.transform="scale(1)")},p)}i.closest(t)&&!i.closest(t).classList.contains(s)&&setTimeout(()=>{u.textContent=parseInt(u.textContent,10)-1}),setTimeout(()=>{parseInt(u.textContent,10)<=0&&(m.style.transform="scale(0)")})})}function x(){const l=document.querySelectorAll("[data-quantity-container]");if(!l.length)return;l.forEach(e=>{e.querySelectorAll(".quantity").forEach(n=>{const s=n.querySelector("input"),a=n.querySelector(".quantity-remove");Number(s.value)<=0?a.classList.add("_disabled"):a.classList.remove("_disabled")}),t(e),e.addEventListener("click",n=>{const s=n.target.closest(".quantity__button");if(!s)return;const a=s.closest(".quantity"),u=a.querySelector("input"),p=a.querySelector(".quantity-remove");let m=Number(u.value)||0;s.classList.contains("quantity-add")?m++:m--,m<=0?(m=0,p.classList.add("_disabled")):p.classList.remove("_disabled"),u.value=m,t(e)}),e.addEventListener("input",n=>{const s=n.target.closest(".quantity input");if(!s)return;s.value=s.value.replace(/\D/g,"");const a=s.closest(".quantity").querySelector(".quantity-remove");Number(s.value)<=0?a.classList.add("_disabled"):a.classList.remove("_disabled"),t(e)})});function t(e){const n=e.querySelectorAll(".product-card__price span");let s=0;n.forEach(u=>{const p=parseFloat(u.textContent.replace(/ /g,"").replace(",","."))||0,m=u.closest(".product-card"),c=Number(m.querySelector("input").value)||0,i=m.querySelector(".product-card__sum span");if(!i)return;const o=p*c;i.innerHTML=`${o.toLocaleString()} <i class="icon-rub"></i>`,s+=o});const a=e.querySelector(".input-total");a&&(a.innerHTML=`Итого: ${s.toLocaleString()} <i class="icon-rub"></i>`)}}function q(){let l=[],t=document.querySelectorAll("[data-da]"),e=[],n=[];if(t.length>0){let c=0;for(let i=0;i<t.length;i++){const o=t[i],r=o.getAttribute("data-da"),d=o.hasAttribute("data-da-position")?o.getAttribute("data-da-position"):"last",f=o.hasAttribute("data-da-resolution")?o.getAttribute("data-da-resolution"):768;o.setAttribute("data-da-index",c),l[c]={parent:o.parentNode,index:u(o)},e[c]={element:o,destination:document.querySelector("."+r),place:d,breakpoint:f},c++}m(e);for(let i=0;i<e.length;i++){const r=e[i].breakpoint,f=window.matchMedia(`(max-width: ${r}px)`);n.push(f),f.addEventListener("change",s)}}function s(){for(let c=0;c<e.length;c++){const i=e[c],o=i.element,r=i.destination,d=i.place,h="_dynamic_adapt_"+i.breakpoint;if(n[c].matches){if(!o.classList.contains(h)){let y=p(r)[d];d==="first"?y=p(r)[0]:d==="last"&&(y=p(r)[p(r).length]),r.insertBefore(o,r.children[y]),o.classList.add(h)}}else o.classList.contains(h)&&(a(o),o.classList.remove(h))}}s();function a(c){const i=c.getAttribute("data-da-index"),o=l[i],r=o.parent,d=o.index,f=p(r,!0)[d];r.insertBefore(c,r.children[f])}function u(c){return Array.prototype.slice.call(c.parentNode.children).indexOf(c)}function p(c,i){const o=c.children,r=[];for(let d=0;d<o.length;d++){const f=o[d];(i||f.getAttribute("data-da")==null)&&r.push(d)}return r}function m(c){c.sort(function(i,o){return i.breakpoint>o.breakpoint?-1:1}),c.sort(function(i,o){return i.place>o.place?1:-1})}}class g{constructor(t,e=350){if(!t)throw new Error("ItcCollapse: target element is required");this._target=t,this._duration=e}show(){const t=this._target;if(t.classList.contains("collapsing")||t.classList.contains("_show"))return;t.classList.remove("_collapse");const e=t.scrollHeight;t.style.height="0px",t.style.overflow="hidden",t.style.transition=`height ${this._duration}ms ease`,t.classList.add("collapsing"),requestAnimationFrame(()=>{t.style.height=`${e}px`}),setTimeout(()=>{t.classList.remove("collapsing"),t.classList.add("_collapse","_show"),t.style.height="",t.style.transition="",t.style.overflow=""},this._duration)}hide(){const t=this._target;if(t.classList.contains("collapsing")||!t.classList.contains("_show"))return;const e=t.scrollHeight;t.style.height=`${e}px`,t.offsetHeight,t.style.overflow="hidden",t.style.transition=`height ${this._duration}ms ease`,t.classList.remove("_collapse","_show"),t.classList.add("collapsing"),requestAnimationFrame(()=>{t.style.height="0px"}),setTimeout(()=>{t.classList.remove("collapsing"),t.classList.add("_collapse"),t.style.height="",t.style.transition="",t.style.overflow=""},this._duration)}toggle(){this._target.classList.contains("_show")?this.hide():this.show()}static initAll(t="._collapse",e=350){const n=document.querySelectorAll(t);return Array.from(n).map(s=>new g(s,e))}}function b(){let l=0;const t=document.querySelector(".page__header");window.addEventListener("scroll",()=>{const e=window.innerWidth,n=window.pageYOffset||document.documentElement.scrollTop;let s=32;e<=690&&(s=39),e<=490&&(s=36),n>l?(t.style.top=`-${s}px`,t.classList.add("with-border")):(t.style.top="0",t.classList.remove("with-border")),l=n<=0?0:n},{passive:!0})}function S(l){document.querySelectorAll(l).forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("like")})})}function w(){const l=document.querySelectorAll(".burger-button"),t=document.querySelector(".header"),e=document.querySelector(".sidebar-menu");l.forEach(n=>{n.addEventListener("click",()=>{n.classList.toggle("is-active"),n.classList.contains("is-active")?(v(e),t.classList.add("with-shadow")):n.classList.contains("is-active")||(v(e),t.classList.remove("with-shadow"))})}),window.addEventListener("resize",()=>{l.forEach(n=>{n.classList.contains("is-active")&&(document.body.classList.remove("no-scroll"),e.classList.remove("_open-menu"),n.classList.remove("is-active"))})})}function v(l){const t=document.querySelector(".page__aside-button");l.classList.contains("_open-menu")?(l.style.transition="transform 0.3s ease",l.classList.remove("_open-menu"),document.body.classList.remove("no-scroll"),e(l),t&&setTimeout(()=>{t.style.opacity="1",t.style.transition="opacity 0.3s ease",t.style.pointerEvents="all"},300)):(t&&(t.style.opacity="0",t.style.transition="opacity 0.3s ease",t.style.pointerEvents="none"),l.style.transition="transform 0.3s ease",l.classList.add("_open-menu"),document.body.classList.add("no-scroll"),e(l));function e(n){function s(){n.style.transition="",n.removeEventListener("transitionend",s)}n.addEventListener("transitionend",s)}}function E(){document.querySelectorAll("._slideToggle").forEach(t=>{const e=t.querySelector("._trigger");if(!e)return;const n=t.querySelector("._collapse");n&&(t._collapseInstance=new g(n),e.addEventListener("click",()=>{const s=t.closest(".parent");if(s){const a=s.querySelector("._open");a&&a!==t&&(a.classList.remove("_open"),a._collapseInstance.toggle())}t.classList.toggle("_open"),t._collapseInstance.toggle()}))})}L();_(".favourites",".product-card__favourites",".icon-heart-like",".icon-heart-like","like");document.addEventListener("DOMContentLoaded",()=>{x(),b(),E(),S(".product-card__favourites"),w(),q()});console.log("%c РОССИЯ ","background: blue; color: yellow; font-size: x-large; border-left: 5px solid black; border-top: 30px solid white; border-right: 2px solid black; border-bottom: 30px solid red;");
